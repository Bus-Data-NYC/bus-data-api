
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="NYC bus and subway information.">
    <meta name="author" content="Nathan Johnson">
    <title>MyTransit.nyc</title>
    <link rel="icon" href="data:;base64,=">
    <link href="//static.mytransit.nyc/css/bootstrap.min.css" rel="stylesheet">
    <link href="//static.mytransit.nyc/css/bootstrap-datepicker.min.css" rel="stylesheet">
    <style>
      html, body {width:100%; height:100%}
      html {overflow-y:scroll}
      a {text-decoration:none !important}
      a:hover {text-decoration:none !important}
      a#back_to_route {color:#333}
      h1 a, h2 a, h3 a {color:#333}
      h1 a:hover, h2 a:hover, h3 a:hover {color:#333}
      .label {font-size:90%}
      .n {text-align:right}
      th {white-space:nowrap; font-weight:bold}
      .stops {float:left; margin-right:3em}
      #route {display:none}
      #stop {display:none}
      #footer {clear:both; padding-top:2em}
      td, th {vertical-align:top}
      .times {float:left; margin-right:5em}
      .times th {text-align:right}
      .times caption {text-align:left; white-space:nowrap}
      span.early {background-color:#ff6}
      span.late {background-color:#f99}
      span.very_late {background-color:#f00; color:#fff}
      span.interpolated {font-style:italic; color:#666}
      span.arrival {text-decoration:underline}
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="//static.mytransit.nyc/js/bootstrap-datepicker.min.js"></script>
  </head>
  <body>
    <div class="container">
      <h1>MyTransit.nyc</h1>
      <ol id="breadcrumb" class="breadcrumb">
  	<li><a href="/beta">Home</a></li>
  	<li class="active">MTA Bus</li>
      </ol>
      <div id="routes" class="routes" style="line-height:2.25em">
      	<p class="lead" style="margin-bottom:0; margin-top:1em">Bronx</p><a href="#" class="route" id="route_Bx1" title="Bx1 Riverdale - Mott Haven"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Bx1</span></a> <a href="#" class="route" id="route_Bx2" title="Bx2 Kingsbridge Heights - Mott Haven"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Bx2</span></a> <a href="#" class="route" id="route_Bx3" title="Bx3 Riverdale - George Washington Bridge"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Bx3</span></a> <a href="#" class="route" id="route_Bx4" title="Bx4 Westchester Sq - The Hub"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Bx4</span></a> <a href="#" class="route" id="route_Bx4A" title="Bx4A Westchester Sq - The Hub"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Bx4A</span></a> <a href="#" class="route" id="route_Bx5" title="Bx5 Pelham Bay - West Farms Rd & Southern Blvd"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Bx5</span></a> <a href="#" class="route" id="route_Bx6" title="Bx6 Hunts Point - Riverside Dr"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Bx6</span></a> <a href="#" class="route" id="route_Bx7" title="Bx7 Riverdale - Washington Heights"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Bx7</span></a> <a href="#" class="route" id="route_Bx8" title="Bx8 Williamsbridge - Locust Point"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Bx8</span></a> <a href="#" class="route" id="route_Bx9" title="Bx9 Riverdale - West Farms Sq"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Bx9</span></a> <a href="#" class="route" id="route_Bx10" title="Bx10 Riverdale - Norwood"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Bx10</span></a> <a href="#" class="route" id="route_Bx11" title="Bx11 West Farms Rd - Southern Blvd & GW Bridge"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Bx11</span></a> <a href="#" class="route" id="route_Bx12" title="Bx12 Pelham Pkwy - Fordham Rd"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Bx12</span></a> <a href="#" class="route" id="route_Bx12-SBS" title="Bx12-SBS Pelham Pkwy - Fordham Rd"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Bx12<small> SBS</small></span></a> <a href="#" class="route" id="route_Bx13" title="Bx13 George Washington Bridge - Yankee Stadium"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Bx13</span></a> <a href="#" class="route" id="route_Bx15" title="Bx15 Fordham Plaza - Manhattanville"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Bx15</span></a> <a href="#" class="route" id="route_Bx16" title="Bx16 Pelham - Norwood"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Bx16</span></a> <a href="#" class="route" id="route_Bx17" title="Bx17 Fordham Plaza - Port Morris"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Bx17</span></a> <a href="#" class="route" id="route_Bx18" title="Bx18 Tremont - Morris Heights"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Bx18</span></a> <a href="#" class="route" id="route_Bx19" title="Bx19 NY Botanical Garden - Riverbank Park"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Bx19</span></a> <a href="#" class="route" id="route_Bx20" title="Bx20 Riverdale - Inwood"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Bx20</span></a> <a href="#" class="route" id="route_Bx21" title="Bx21 Westchester Sq - Mott Haven"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Bx21</span></a> <a href="#" class="route" id="route_Bx22" title="Bx22 Bedford Park - Castle Hill"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Bx22</span></a> <a href="#" class="route" id="route_Bx23" title="Bx23 Pelham Bay - Co-Op City"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Bx23</span></a> <a href="#" class="route" id="route_Bx24" title="Bx24 Country Club - Hutchinson Metro Center"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Bx24</span></a> <a href="#" class="route" id="route_Bx26" title="Bx26 Co-op City Section 5 - Bedford Park"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Bx26</span></a> <a href="#" class="route" id="route_Bx27" title="Bx27 Clasons Pt - West Farms Rd & Southern Blvd"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Bx27</span></a> <a href="#" class="route" id="route_Bx28" title="Bx28 Co-op City Section 5 - Fordham Center"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Bx28</span></a> <a href="#" class="route" id="route_Bx29" title="Bx29 City Island - Co-op City Bay Plaza"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Bx29</span></a> <a href="#" class="route" id="route_Bx30" title="Bx30 Co-op City Section 5 - Norwood"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Bx30</span></a> <a href="#" class="route" id="route_Bx31" title="Bx31 Woodlawn - Westchester Sq"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Bx31</span></a> <a href="#" class="route" id="route_Bx32" title="Bx32 Kingsbridge VA Hospital - Mott Haven"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Bx32</span></a> <a href="#" class="route" id="route_Bx33" title="Bx33 Port Morris - Harlem"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Bx33</span></a> <a href="#" class="route" id="route_Bx34" title="Bx34 Woodlawn - Fordham Center"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Bx34</span></a> <a href="#" class="route" id="route_Bx35" title="Bx35 West Farms Rd & Southern Blvd - GW Bridge"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Bx35</span></a> <a href="#" class="route" id="route_Bx36" title="Bx36 Soundview - George Washington Bridge"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Bx36</span></a> <a href="#" class="route" id="route_Bx38" title="Bx38 Co-op City Bay Plaza - Norwood"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Bx38</span></a> <a href="#" class="route" id="route_Bx39" title="Bx39 Wakefield - Clasons Pt"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Bx39</span></a> <a href="#" class="route" id="route_Bx40" title="Bx40 Throgs Neck - River Park Towers"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Bx40</span></a> <a href="#" class="route" id="route_Bx41" title="Bx41 Williamsbridge - The Hub"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Bx41</span></a> <a href="#" class="route" id="route_Bx41-SBS" title="Bx41-SBS Williamsbridge - Select Bus Service"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Bx41<small> SBS</small></span></a> <a href="#" class="route" id="route_Bx42" title="Bx42 Throgs Neck - River Park Towers"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Bx42</span></a> <a href="#" class="route" id="route_Bx46" title="Bx46 Prospect Av - Westchester Av / Hunts Point Market"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Bx46</span></a> <p class="lead" style="margin-bottom:0; margin-top:1em">Brooklyn</p><a href="#" class="route" id="route_B1" title="B1 Bay Ridge - Manhattan Beach"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">B1</span></a> <a href="#" class="route" id="route_B2" title="B2 Kings Hwy Station - Kings Plaza"><span class="label" style="background-color:#006CB7; color:#FFFFFF">B2</span></a> <a href="#" class="route" id="route_B3" title="B3 Bensonhurst - Bergen Beach"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B3</span></a> <a href="#" class="route" id="route_B4" title="B4 Bay Ridge - Sheepshead Bay"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">B4</span></a> <a href="#" class="route" id="route_B6" title="B6 Bath Beach - East New York"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B6</span></a> <a href="#" class="route" id="route_B7" title="B7 Midwood - Bedford-Stuyvesant"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B7</span></a> <a href="#" class="route" id="route_B8" title="B8 Dyker Heights - East Flatbush"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">B8</span></a> <a href="#" class="route" id="route_B9" title="B9 Bay Ridge - Kings Plaza"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B9</span></a> <a href="#" class="route" id="route_B11" title="B11 Sunset Park - Midwood"><span class="label" style="background-color:#006CB7; color:#FFFFFF">B11</span></a> <a href="#" class="route" id="route_B12" title="B12 Lefferts Gardens - East New York"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">B12</span></a> <a href="#" class="route" id="route_B13" title="B13 Spring Creek - Wyckoff Hospital"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">B13</span></a> <a href="#" class="route" id="route_B14" title="B14 Spring Creek - Crown Heights"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">B14</span></a> <a href="#" class="route" id="route_B15" title="B15 Bedford Stuyvesant - JFK Airport"><span class="label" style="background-color:#B933AD; color:#FFFFFF">B15</span></a> <a href="#" class="route" id="route_B16" title="B16 Bay Ridge - Lefferts Gardens"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">B16</span></a> <a href="#" class="route" id="route_B17" title="B17 Canarsie - Crown Heights"><span class="label" style="background-color:#B933AD; color:#FFFFFF">B17</span></a> <a href="#" class="route" id="route_B20" title="B20 Ridgewood - Spring Creek"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">B20</span></a> <a href="#" class="route" id="route_B24" title="B24 Williamsburg - Greenpoint"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">B24</span></a> <a href="#" class="route" id="route_B25" title="B25 Dwntn Bklyn & DUMBO - Broadway Junction"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">B25</span></a> <a href="#" class="route" id="route_B26" title="B26 Downtown Brooklyn - Ridgewood"><span class="label" style="background-color:#006CB7; color:#FFFFFF">B26</span></a> <a href="#" class="route" id="route_B31" title="B31 Gerritsen Beach - Kings Hwy Station"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">B31</span></a> <a href="#" class="route" id="route_B32" title="B32 Williamsburg - Long Island City"><span class="label" style="background-color:#006CB7; color:#FFFFFF">B32</span></a> <a href="#" class="route" id="route_B35" title="B35 Brownsville - Sunset Park"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B35</span></a> <a href="#" class="route" id="route_B36" title="B36 Sheepshead Bay - Coney Island"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">B36</span></a> <a href="#" class="route" id="route_B37" title="B37 Downtown Brooklyn - Bay Ridge"><span class="label" style="background-color:#B933AD; color:#FFFFFF">B37</span></a> <a href="#" class="route" id="route_B38" title="B38 Ridgewood - Downtown Brooklyn"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">B38</span></a> <a href="#" class="route" id="route_B41" title="B41 Kings Plaza - Downtown Brooklyn"><span class="label" style="background-color:#006CB7; color:#FFFFFF">B41</span></a> <a href="#" class="route" id="route_B42" title="B42 Canarsie Pier - Rockaway Parkway Station"><span class="label" style="background-color:#006CB7; color:#FFFFFF">B42</span></a> <a href="#" class="route" id="route_B43" title="B43 Greenpoint - Lefferts Gardens"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B43</span></a> <a href="#" class="route" id="route_B44" title="B44 Sheepshead Bay - Williamsburg"><span class="label" style="background-color:#B933AD; color:#FFFFFF">B44</span></a> <a href="#" class="route" id="route_B44-SBS" title="B44-SBS Sheepshead Bay - Williamsburg"><span class="label" style="background-color:#B933AD; color:#FFFFFF">B44<small> SBS</small></span></a> <a href="#" class="route" id="route_B45" title="B45 Downtown Brooklyn - Crown Heights"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B45</span></a> <a href="#" class="route" id="route_B46" title="B46 Kings Plaza - Williamsburg"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">B46</span></a> <a href="#" class="route" id="route_B47" title="B47 Kings Plaza - Bedford-Stuyvesant"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">B47</span></a> <a href="#" class="route" id="route_B48" title="B48 Lefferts Gardens - Greenpoint"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">B48</span></a> <a href="#" class="route" id="route_B49" title="B49 Manhattan Beach - Bedford-Stuyvesant"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B49</span></a> <a href="#" class="route" id="route_B52" title="B52 Downtown Brooklyn - Ridgewood"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B52</span></a> <a href="#" class="route" id="route_B54" title="B54 Downtown Brooklyn - Ridgewood"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">B54</span></a> <a href="#" class="route" id="route_B57" title="B57 Gowanus - Maspeth"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B57</span></a> <a href="#" class="route" id="route_B60" title="B60 Williamsburg - Canarsie"><span class="label" style="background-color:#B933AD; color:#FFFFFF">B60</span></a> <a href="#" class="route" id="route_B61" title="B61 Park Slope - Downtown Brooklyn"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">B61</span></a> <a href="#" class="route" id="route_B62" title="B62 Downtown Brooklyn - Long Island City"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">B62</span></a> <a href="#" class="route" id="route_B63" title="B63 Bay Ridge - Cobble Hill"><span class="label" style="background-color:#006CB7; color:#FFFFFF">B63</span></a> <a href="#" class="route" id="route_B64" title="B64 Bay Ridge - Coney Island"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">B64</span></a> <a href="#" class="route" id="route_B65" title="B65 Downtown Brooklyn - Crown Heights"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">B65</span></a> <a href="#" class="route" id="route_B67" title="B67 Brooklyn Navy Yard - Kensington"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B67</span></a> <a href="#" class="route" id="route_B68" title="B68 Coney Island - Windsor Terrace"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B68</span></a> <a href="#" class="route" id="route_B69" title="B69 Downtown Brooklyn - Kensington"><span class="label" style="background-color:#006CB7; color:#FFFFFF">B69</span></a> <a href="#" class="route" id="route_B70" title="B70 Dyker Heights - Sunset Park"><span class="label" style="background-color:#B933AD; color:#FFFFFF">B70</span></a> <a href="#" class="route" id="route_B74" title="B74 Sea Gate - Stillwell Av"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B74</span></a> <a href="#" class="route" id="route_B82" title="B82 Coney Island - Spring Creek Towers"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">B82</span></a> <a href="#" class="route" id="route_B83" title="B83 Spring Creek - Broadway Junction"><span class="label" style="background-color:#EE352E; color:#FFFFFF">B83</span></a> <a href="#" class="route" id="route_B84" title="B84 Spring Creek-New Lots"><span class="label" style="background-color:#006CB7; color:#FFFFFF">B84</span></a> <a href="#" class="route" id="route_B100" title="B100 Mill Basin - Midwood"><span class="label" style="background-color:#B933AD; color:#FFFFFF">B100</span></a> <a href="#" class="route" id="route_B103" title="B103 Canarsie - Downtown Brooklyn Ltd"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">B103</span></a> <p class="lead" style="margin-bottom:0; margin-top:1em">Manhattan</p><a href="#" class="route" id="route_M1" title="M1 Harlem - East Village"><span class="label" style="background-color:#EE352E; color:#FFFFFF">M1</span></a> <a href="#" class="route" id="route_M2" title="M2 Washington Heights - East Village"><span class="label" style="background-color:#B933AD; color:#FFFFFF">M2</span></a> <a href="#" class="route" id="route_M3" title="M3 Fort George - East Village"><span class="label" style="background-color:#B933AD; color:#FFFFFF">M3</span></a> <a href="#" class="route" id="route_M4" title="M4 The Cloisters - Penn Station"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">M4</span></a> <a href="#" class="route" id="route_M5" title="M5 George Washington Bridge - South Ferry"><span class="label" style="background-color:#EE352E; color:#FFFFFF">M5</span></a> <a href="#" class="route" id="route_M7" title="M7 Harlem - 14th Street"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">M7</span></a> <a href="#" class="route" id="route_M8" title="M8 West Village - East Village LTD"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">M8</span></a> <a href="#" class="route" id="route_M9" title="M9 Battery Park City - Kips Bay"><span class="label" style="background-color:#B933AD; color:#FFFFFF">M9</span></a> <a href="#" class="route" id="route_M10" title="M10 Harlem - Columbus Circle"><span class="label" style="background-color:#006CB7; color:#FFFFFF">M10</span></a> <a href="#" class="route" id="route_M11" title="M11 Riverbank Park & Harlem - West Village"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">M11</span></a> <a href="#" class="route" id="route_M12" title="M12 Midtown West - West Village"><span class="label" style="background-color:#006CB7; color:#FFFFFF">M12</span></a> <a href="#" class="route" id="route_M14A" title="M14A Lower East Side - Abingdon Sq"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">M14A</span></a> <a href="#" class="route" id="route_M14D" title="M14D Lower East Side - Chelsea Piers"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">M14D</span></a> <a href="#" class="route" id="route_M15" title="M15 East Harlem - South Ferry"><span class="label" style="background-color:#006CB7; color:#FFFFFF">M15</span></a> <a href="#" class="route" id="route_M15-SBS" title="M15-SBS East Harlem - South Ferry"><span class="label" style="background-color:#006CB7; color:#FFFFFF">M15<small> SBS</small></span></a> <a href="#" class="route" id="route_M20" title="M20 Lincoln Center - South Ferry"><span class="label" style="background-color:#EE352E; color:#FFFFFF">M20</span></a> <a href="#" class="route" id="route_M21" title="M21 Lower East Side - West Village LTD"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">M21</span></a> <a href="#" class="route" id="route_M22" title="M22 Lower East Side - Battery Park City"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">M22</span></a> <a href="#" class="route" id="route_M23" title="M23 Chelsea Piers - East Side"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">M23</span></a> <a href="#" class="route" id="route_M31" title="M31 Yorkville - Clinton"><span class="label" style="background-color:#B933AD; color:#FFFFFF">M31</span></a> <a href="#" class="route" id="route_M34-SBS" title="M34-SBS East Side - Javits Center"><span class="label" style="background-color:#006CB7; color:#FFFFFF">M34<small> SBS</small></span></a> <a href="#" class="route" id="route_M34A-SBS" title="M34A-SBS Waterside - Port Authority Terminal"><span class="label" style="background-color:#006CB7; color:#FFFFFF">M34A<small> SBS</small></span></a> <a href="#" class="route" id="route_M35" title="M35 Ward's Island - East Harlem"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">M35</span></a> <a href="#" class="route" id="route_M42" title="M42 United Nations - W 42 St Pier"><span class="label" style="background-color:#EE352E; color:#FFFFFF">M42</span></a> <a href="#" class="route" id="route_M50" title="M50 W 42 St Pier - East Side"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">M50</span></a> <a href="#" class="route" id="route_M57" title="M57 East Side - West Side"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">M57</span></a> <a href="#" class="route" id="route_M60-SBS" title="M60-SBS LaGuardia Airport - West Side"><span class="label" style="background-color:#EE352E; color:#FFFFFF">M60<small> SBS</small></span></a> <a href="#" class="route" id="route_M66" title="M66 East Side - Lincoln Center"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">M66</span></a> <a href="#" class="route" id="route_M72" title="M72 East Side - West Side"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">M72</span></a> <a href="#" class="route" id="route_M79" title="M79 Yorkville - West Side"><span class="label" style="background-color:#EE352E; color:#FFFFFF">M79</span></a> <a href="#" class="route" id="route_M86" title="M86 Yorkville - West Side"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">M86</span></a> <a href="#" class="route" id="route_M86-SBS" title="M86-SBS Yorkville - West Side"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">M86<small> SBS</small></span></a> <a href="#" class="route" id="route_M96" title="M96 East Side - West Side"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">M96</span></a> <a href="#" class="route" id="route_M98" title="M98 Washington Heights - Upper East Side"><span class="label" style="background-color:#EE352E; color:#FFFFFF">M98</span></a> <a href="#" class="route" id="route_M100" title="M100 Inwood - East Harlem"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">M100</span></a> <a href="#" class="route" id="route_M101" title="M101 East Village - Harlem"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">M101</span></a> <a href="#" class="route" id="route_M102" title="M102 Harlem - East Village"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">M102</span></a> <a href="#" class="route" id="route_M103" title="M103 East Harlem - City Hall"><span class="label" style="background-color:#B933AD; color:#FFFFFF">M103</span></a> <a href="#" class="route" id="route_M104" title="M104 West Harlem - Times Square"><span class="label" style="background-color:#B933AD; color:#FFFFFF">M104</span></a> <a href="#" class="route" id="route_M106" title="M106 East Harlem - West Side"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">M106</span></a> <a href="#" class="route" id="route_M116" title="M116 West Side - East Harlem"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">M116</span></a> <p class="lead" style="margin-bottom:0; margin-top:1em">Queens</p><a href="#" class="route" id="route_Q1" title="Q1 Queens Village / Bellerose - Jamaica"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q1</span></a> <a href="#" class="route" id="route_Q2" title="Q2 Queens Village - Jamaica"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Q2</span></a> <a href="#" class="route" id="route_Q3" title="Q3 Jamaica - JFK Airport"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Q3</span></a> <a href="#" class="route" id="route_Q4" title="Q4 Cambria Heights - Jamaica"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q4</span></a> <a href="#" class="route" id="route_Q5" title="Q5 Rosedale - Jamaica"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q5</span></a> <a href="#" class="route" id="route_Q6" title="Q6 Sutphin Boulevard"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Q6</span></a> <a href="#" class="route" id="route_Q7" title="Q7 Rockaway Boulevard"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Q7</span></a> <a href="#" class="route" id="route_Q8" title="Q8 101St Avenue"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Q8</span></a> <a href="#" class="route" id="route_Q9" title="Q9 Lincoln Street"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Q9</span></a> <a href="#" class="route" id="route_Q10" title="Q10 Kew Gardens - Jfk Airport"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q10</span></a> <a href="#" class="route" id="route_Q11" title="Q11 Woodhaven Blvd"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Q11</span></a> <a href="#" class="route" id="route_Q12" title="Q12 Little Neck - Flushing"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q12</span></a> <a href="#" class="route" id="route_Q13" title="Q13 Fort Totten - Flushing"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q13</span></a> <a href="#" class="route" id="route_Q15" title="Q15 Flushing - Beechhurst"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q15</span></a> <a href="#" class="route" id="route_Q15A" title="Q15A Flushing - Beechhurst / Whitestone"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q15A</span></a> <a href="#" class="route" id="route_Q16" title="Q16 Fort Totten - Flushing"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q16</span></a> <a href="#" class="route" id="route_Q17" title="Q17 Flushing - Jamaica"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q17</span></a> <a href="#" class="route" id="route_Q18" title="Q18 30 Ave - 58 St - 65 Pl"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Q18</span></a> <a href="#" class="route" id="route_Q19" title="Q19 Astoria Blvd"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Q19</span></a> <a href="#" class="route" id="route_Q20A" title="Q20A College Point - Jamaica"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Q20A</span></a> <a href="#" class="route" id="route_Q20B" title="Q20B College Point - Jamaica"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Q20B</span></a> <a href="#" class="route" id="route_Q21" title="Q21 Cross Bay - Woodhaven Blvds"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Q21</span></a> <a href="#" class="route" id="route_Q22" title="Q22 Rockaway Beach Blvd - Beach Channel Dr"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q22</span></a> <a href="#" class="route" id="route_Q23" title="Q23 108 Street"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q23</span></a> <a href="#" class="route" id="route_Q24" title="Q24 Broadway Junction - Jamaica"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Q24</span></a> <a href="#" class="route" id="route_Q25" title="Q25 127 Street - Kissena Bl - Parsons Bl"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Q25</span></a> <a href="#" class="route" id="route_Q26" title="Q26 Fresh Meadows - Flushing (Part-time)"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Q26</span></a> <a href="#" class="route" id="route_Q27" title="Q27 Cambria Heights - Flushing"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q27</span></a> <a href="#" class="route" id="route_Q28" title="Q28 Bayside - Flushing"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q28</span></a> <a href="#" class="route" id="route_Q29" title="Q29 Dry Harbor Road - 80 Street"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Q29</span></a> <a href="#" class="route" id="route_Q30" title="Q30 Little Neck or Queensborough Community College - Jamaica"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q30</span></a> <a href="#" class="route" id="route_Q31" title="Q31 Bayside - Jamaica"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q31</span></a> <a href="#" class="route" id="route_Q32" title="Q32 Jackson Heights - Penn Station"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Q32</span></a> <a href="#" class="route" id="route_Q33" title="Q33 82 St/83 St - 95 St & Ditmars Blvd"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q33</span></a> <a href="#" class="route" id="route_Q34" title="Q34 Willets Pt Bl - Kissena Bl - Parsons Bl"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q34</span></a> <a href="#" class="route" id="route_Q35" title="Q35 Rockaway Park - Brooklyn College"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Q35</span></a> <a href="#" class="route" id="route_Q36" title="Q36 Floral Park or Little Neck - Jamaica"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q36</span></a> <a href="#" class="route" id="route_Q37" title="Q37 111Th Street"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Q37</span></a> <a href="#" class="route" id="route_Q38" title="Q38 Eliot Ave - Penelope Ave"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q38</span></a> <a href="#" class="route" id="route_Q39" title="Q39 48 Ave - 58 St - Forest Ave"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Q39</span></a> <a href="#" class="route" id="route_Q40" title="Q40 142Nd Street"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Q40</span></a> <a href="#" class="route" id="route_Q41" title="Q41 127Th Street - 109Th Avenue"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Q41</span></a> <a href="#" class="route" id="route_Q42" title="Q42 Addeslieigh Park - Jamaica"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Q42</span></a> <a href="#" class="route" id="route_Q43" title="Q43 Floral Park - Jamaica"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q43</span></a> <a href="#" class="route" id="route_Q44" title="Q44 Bronx Zoo - Jamaica"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q44</span></a> <a href="#" class="route" id="route_Q46" title="Q46 Glen Oaks - Kew Gardens"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q46</span></a> <a href="#" class="route" id="route_Q47" title="Q47 Atlas Mall - Laguardia Main Term"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Q47</span></a> <a href="#" class="route" id="route_Q48" title="Q48 Flushing - LaGuardia Airport"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Q48</span></a> <a href="#" class="route" id="route_Q49" title="Q49 35 Ave"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Q49</span></a> <a href="#" class="route" id="route_Q50" title="Q50 Co-Op City/Pelham Bay - Flushing"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q50</span></a> <a href="#" class="route" id="route_Q52" title="Q52 Elmhurst - Arverne Limited"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q52</span></a> <a href="#" class="route" id="route_Q53" title="Q53 Woodside - Rockaway Pk Limited"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q53</span></a> <a href="#" class="route" id="route_Q54" title="Q54 Williamsburg - Jamaica"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Q54</span></a> <a href="#" class="route" id="route_Q55" title="Q55 Ridgewood - Richmond Hill"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q55</span></a> <a href="#" class="route" id="route_Q56" title="Q56 Broadway Junction - Jamaica"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Q56</span></a> <a href="#" class="route" id="route_Q58" title="Q58 Ridgewood - Flushing"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Q58</span></a> <a href="#" class="route" id="route_Q59" title="Q59 Williamsburg - Rego Park"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q59</span></a> <a href="#" class="route" id="route_Q60" title="Q60 Queens Boulevard"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q60</span></a> <a href="#" class="route" id="route_Q64" title="Q64 Jewel Ave"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q64</span></a> <a href="#" class="route" id="route_Q65" title="Q65 College Point Bl - 164 St"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Q65</span></a> <a href="#" class="route" id="route_Q66" title="Q66 Northern Blvd/Queens Plaza S"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q66</span></a> <a href="#" class="route" id="route_Q67" title="Q67 Borden Ave - 69 Street"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q67</span></a> <a href="#" class="route" id="route_Q69" title="Q69 21 St - Ditmars Blvd"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">Q69</span></a> <a href="#" class="route" id="route_Q70" title="Q70 Woodside - Laguardia Airport"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q70</span></a> <a href="#" class="route" id="route_Q72" title="Q72 Junction Blvd - Laguardia Main Term"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Q72</span></a> <a href="#" class="route" id="route_Q76" title="Q76 College Point - Jamaica"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Q76</span></a> <a href="#" class="route" id="route_Q77" title="Q77 Laurelton - Jamaica"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q77</span></a> <a href="#" class="route" id="route_Q83" title="Q83 Cambria Heights - Jamaica"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Q83</span></a> <a href="#" class="route" id="route_Q84" title="Q84 Laurelton - Jamaica"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Q84</span></a> <a href="#" class="route" id="route_Q85" title="Q85 Rosedale - Jamaica"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q85</span></a> <a href="#" class="route" id="route_Q88" title="Q88 Elmhurst - Queens Village"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q88</span></a> <a href="#" class="route" id="route_Q99" title="Q99 Queensboro Plaza - Vernon Bl"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q99</span></a> <a href="#" class="route" id="route_Q100" title="Q100 Rikers Island - Long Island City"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">Q100</span></a> <a href="#" class="route" id="route_Q101" title="Q101 Steinway Street"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">Q101</span></a> <a href="#" class="route" id="route_Q102" title="Q102 31 St - Roosevelt Island"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Q102</span></a> <a href="#" class="route" id="route_Q103" title="Q103 27 Ave - Borden Ave"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q103</span></a> <a href="#" class="route" id="route_Q104" title="Q104 Broadway - 48 Street"><span class="label" style="background-color:#B933AD; color:#FFFFFF">Q104</span></a> <a href="#" class="route" id="route_Q110" title="Q110 Jamaica Ave - Hempstead Ave"><span class="label" style="background-color:#006CB7; color:#FFFFFF">Q110</span></a> <a href="#" class="route" id="route_Q111" title="Q111 Guy Brewer Blvd - 147Th Ave"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q111</span></a> <a href="#" class="route" id="route_Q112" title="Q112 Liberty Ave"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q112</span></a> <a href="#" class="route" id="route_Q113" title="Q113 Guy Brewer Blvd - Nassau Expwy Ltd"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q113</span></a> <a href="#" class="route" id="route_Q114" title="Q114 Guy Brewer Blvd - Rockaway Tpk"><span class="label" style="background-color:#EE352E; color:#FFFFFF">Q114</span></a> <p class="lead" style="margin-bottom:0; margin-top:1em">Staten Island</p><a href="#" class="route" id="route_S40" title="S40 St. George - Goethals Rd North"><span class="label" style="background-color:#B933AD; color:#FFFFFF">S40</span></a> <a href="#" class="route" id="route_S42" title="S42 St. George - Clyde Place"><span class="label" style="background-color:#00AEEF; color:#FFFFFF">S42</span></a> <a href="#" class="route" id="route_S44" title="S44 St. George - Staten Island Mall"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">S44</span></a> <a href="#" class="route" id="route_S46" title="S46 St. George - West Shore Plaza"><span class="label" style="background-color:#006CB7; color:#FFFFFF">S46</span></a> <a href="#" class="route" id="route_S48" title="S48 St. George - Mariners Harbor"><span class="label" style="background-color:#EE352E; color:#FFFFFF">S48</span></a> <a href="#" class="route" id="route_S51" title="S51 St. George - West Shore Plaza"><span class="label" style="background-color:#006CB7; color:#FFFFFF">S51</span></a> <a href="#" class="route" id="route_S52" title="S52 St. George - Staten Island Univ. Hospital"><span class="label" style="background-color:#B933AD; color:#FFFFFF">S52</span></a> <a href="#" class="route" id="route_S53" title="S53 Port Richmond - Bay Ridge"><span class="label" style="background-color:#EE352E; color:#FFFFFF">S53</span></a> <a href="#" class="route" id="route_S54" title="S54 West New Brighton - Eltingville"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">S54</span></a> <a href="#" class="route" id="route_S55" title="S55 Rossville - Staten Island Mall"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">S55</span></a> <a href="#" class="route" id="route_S56" title="S56 Huguenot - Staten Island Mall"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">S56</span></a> <a href="#" class="route" id="route_S57" title="S57 Port Richmond - New Dorp"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">S57</span></a> <a href="#" class="route" id="route_S59" title="S59 Port Richmond - Tottenville"><span class="label" style="background-color:#EE352E; color:#FFFFFF">S59</span></a> <a href="#" class="route" id="route_S61" title="S61 St. George - Staten Island Mall"><span class="label" style="background-color:#EE352E; color:#FFFFFF">S61</span></a> <a href="#" class="route" id="route_S62" title="S62 St. George - Travis"><span class="label" style="background-color:#B933AD; color:#FFFFFF">S62</span></a> <a href="#" class="route" id="route_S66" title="S66 St. George - Port Richmond"><span class="label" style="background-color:#6CBE45; color:#FFFFFF">S66</span></a> <a href="#" class="route" id="route_S74" title="S74 St. George - Bricktown Mall"><span class="label" style="background-color:#EE352E; color:#FFFFFF">S74</span></a> <a href="#" class="route" id="route_S76" title="S76 St. George - Oakwood"><span class="label" style="background-color:#B933AD; color:#FFFFFF">S76</span></a> <a href="#" class="route" id="route_S78" title="S78 St. George - Bricktown Mall"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">S78</span></a> <a href="#" class="route" id="route_S79-SBS" title="S79-SBS Staten Island Mall - Bay Ridge"><span class="label" style="background-color:#006CB7; color:#FFFFFF">S79<small> SBS</small></span></a> <a href="#" class="route" id="route_S81" title="S81 St. George - Grant City LTD"><span class="label" style="background-color:#006CB7; color:#FFFFFF">S81</span></a> <a href="#" class="route" id="route_S84" title="S84 St. George - Bricktown Mall LTD"><span class="label" style="background-color:#EE352E; color:#FFFFFF">S84</span></a> <a href="#" class="route" id="route_S86" title="S86 St. George - Oakwood LTD"><span class="label" style="background-color:#B933AD; color:#FFFFFF">S86</span></a> <a href="#" class="route" id="route_S89" title="S89 Eltingville - Bayonne LTD"><span class="label" style="background-color:#EE352E; color:#FFFFFF">S89</span></a> <a href="#" class="route" id="route_S90" title="S90 St. George - Goethals Rd North LTD"><span class="label" style="background-color:#B933AD; color:#FFFFFF">S90</span></a> <a href="#" class="route" id="route_S91" title="S91 St. George - Staten Island Mall LTD"><span class="label" style="background-color:#EE352E; color:#FFFFFF">S91</span></a> <a href="#" class="route" id="route_S92" title="S92 St. George - Travis LTD"><span class="label" style="background-color:#B933AD; color:#FFFFFF">S92</span></a> <a href="#" class="route" id="route_S93" title="S93 College of Staten Island - Bay Ridge LTD"><span class="label" style="background-color:#EE352E; color:#FFFFFF">S93</span></a> <a href="#" class="route" id="route_S94" title="S94 St. George - Staten Island Mall LTD"><span class="label" style="background-color:#FAA61A; color:#FFFFFF">S94</span></a> <a href="#" class="route" id="route_S96" title="S96 St. George - West Shore Plaza LTD"><span class="label" style="background-color:#006CB7; color:#FFFFFF">S96</span></a> <a href="#" class="route" id="route_S98" title="S98 St. George - Mariners Harbor LTD"><span class="label" style="background-color:#EE352E; color:#FFFFFF">S98</span></a> 
      </div>
      <div id="route">
      </div>
      <div id="stop">
      </div>
      <p id="footer"><!-- small>Information provided without warranty of any kind.</small --></p>
    </div>
    <script>
      // TODO detect location or enter address/zip to find local stops/routes.
      $('a.route').click(function() {
	var route_short_name = $(this).attr('id').substring(6);
	var route_display_name = route_short_name.slice(-4) === '-SBS' ? route_short_name.slice(0, -4) + '<small> SBS</small>' : route_short_name;
	$.getJSON('/api/v1/route/' + route_short_name, function(route) {
	  var route_id = route['route_id'];
	  $('#breadcrumb').html('<li><a href="/beta">Home</a>&nbsp;</li><li><a href="#" id="mta_bus">MTA Bus</a>&nbsp;</li><li class="active">' + route_display_name + '</li>');
	  $('a#mta_bus').click(function() {
	    $('#route').hide();
	    //$('#stop').hide();
	    $('#breadcrumb').html('<li><a href="/beta">Home</a>&nbsp;</li><li class="active">MTA Bus</li>');
	    $('#routes').show();
	  });
	  $('#routes').hide();
          $('#route').html('<div class="lead"><span class="label" style="background-color:#' + route['route_color'] + '; color:#' + route['route_text_color'] + '">' + route_display_name + '</span> ' + route['route_long_name'] + ' <small class="text-muted">' + route['route_desc'] + '</small></div>');
	  $('#route').append('<p class="lead">Stops</p>');
	  $.each(route['directions'], function(d, direction) {
	    if (direction === null) return true;	// continue
	    var stops_html = '<div class="stops"><p>To ' + route['directions'][d] + '</p><ul>';
	    $.each(route['stops'][d], function(s, stop) {
	      stops_html += '<li><a href="#" id="stop_' + d + '_' + stop['stop_id'] + '" class="stop">' + stop['stop_name'] + '</a></li>';
	    });
	    stops_html += '</ul></div>';
	    $('#route').append(stops_html);
	  });
	  $('a.stop').click(function() {
	    $('#stop').empty();
	    var direction_id = $(this).attr('id').substring(5, 6);
            var stop_id = $(this).attr('id').substring(7);
	    $.getJSON('/api/v1/stop/' + route_short_name + '/' + direction_id + '/' + stop_id, function(times) {
	      $('#stop').html('<div class="lead"><a href="#" id="back_to_route"><span class="label" style="background-color:#' + times['route_color'] + '; color:#' + times['route_text_color'] + '">' + route_display_name + '</span> ' + times['route_long_name'] + ' <small class="text-muted">' + times['route_desc'] + '</small></a></div>');
	      $('a#back_to_route').click(function() {
		$('#stop').hide();
	        $('#route_' + route_short_name).trigger('click');
	      });
	      $('#stop').append('<p>To ' + times['direction_name'] + '</p>');
	      $('#stop').append('<p class="lead">Bus Stop: ' + times['stop_name'] + ' <small class="text-muted">(' + times['stop_id'] + ')</small></p>');
	      // NYC Bus Time Machine
	      var date_str = times['date'].toString();
	      date_str = date_str.substring(4, 6) + '/' + date_str.substring(6, 8) + '/' + date_str.substring(0, 4);
	      $('#stop').append('<p>Date:&nbsp;&nbsp;<input type="text" id="date" class="form-control input-sm datepicker" value="' + date_str + '" style="width:6em; display:inline"></p>');
	      $('.datepicker').datepicker({
	        weekStart: 1,
    		startDate: "8/1/2014",
    		endDate: "1/2/2016",
    		autoclose: true,
    		todayHighlight: true
	      }).on('changeDate', function(e) {
		var mm = ('0' + (e.date.getMonth() + 1)).slice(-2);
		var dd = ('0' + e.date.getDate()).slice(-2);
		var yyyy = e.date.getFullYear();
		$.getJSON('/api/v1/stop/' + route_short_name + '/' + direction_id + '/' + stop_id + '/' + yyyy + mm + dd, function(tt) {
		  // Update both times tables.
		  var table = [];
		  for (var h = 0; h < 24; h++) table[h] = [];
		  $.each(tt['stop_times'], function(st, stop_times) {
		    // table[parseInt(stop_times['departure_time'].substring(0, 2))].push(stop_times['departure_time'].substring(3, 5));
		    if (stop_times['pickup_type'] !== 1) table[parseInt(stop_times['departure_time'].substring(0, 2))].push([stop_times['departure_time'].substring(3, 5), 'D']);
                    else table[parseInt(stop_times['arrival_time'].substring(0, 2))].push([stop_times['arrival_time'].substring(3, 5), 'A']);
		  });
		  //var times_html = '';
		  $.each(table, function(h, mins) {
		    if (mins.length < 1) $('#st' + h).html('&nbsp;&ndash;');
		    else {
		      // $('#st' + h).html(mins.join(', '));
		      var times_html = '';
		      $.each(mins, function(i, mins2) {
			if (mins2[1] === 'D') times_html += '<span>' + mins2[0] + '</span>, ';
			else times_html += '<span class="arrival">' + mins2[0] + '</span>, ';
		      });
		      //times_html = times_html.slice(0, -2);
		      $('#st' + h).html(times_html.slice(0, -2));
		    }
		  });
		  for (var h = 0; h < 24; h++) table[h] = [];
                  $.each(tt['actual_times'], function(st, stop_times) {
		    if (stop_times['departure_time'] != null) table[parseInt(stop_times['departure_time'].substring(0, 2))].push([stop_times['departure_time'], stop_times['deviation'], stop_times['vehicle_id'], stop_times['source'], 'D']);
                    else table[parseInt(stop_times['arrival_time'].substring(0, 2))].push([stop_times['arrival_time'], stop_times['deviation'], stop_times['vehicle_id'], stop_times['source'], 'A']);
                  });
                  $.each(table, function(h, mins) {
                    if (mins.length < 1) $('#at' + h).html('&nbsp;&ndash;');
                    else {
			var times_html2 = '';
			$.each(mins, function(i, mins2) {	// Update
				var class_deviation = '';
				/*
				if (mins2[1] > 600) class_deviation = 'very_late';
				else if (mins2[1] > 300) class_deviation = 'late';
				else if (mins2[1] < -60) class_deviation = 'early';
				*/
				var class_source = '';
				if (mins2[3] !== 'C') class_source = ' interpolated';
				var class_arrival = '';
				if (mins2[4] === 'A') class_arrival = ' arrival';
				times_html2 += '<span id="bus_' + mins2[2] + '_' + mins2[0] + '" class="' + class_deviation + class_source + class_arrival + '">' + mins2[0].substring(3, 5) + '</span>, ';
                        });
			$('#at' + h).html(times_html2.slice(0, -2));
		    }
                  });
		});
    	      });
	      var schedule = [];
	      var actual = [];
	      for (var h = 0; h < 24; h++) {
	        schedule[h] = [];
	        actual[h] = [];
	      }
	      $.each(times['stop_times'], function(st, stop_times) {
		if (stop_times['pickup_type'] !== 1) schedule[parseInt(stop_times['departure_time'].substring(0, 2))].push([stop_times['departure_time'].substring(3, 5), 'D']);
		else schedule[parseInt(stop_times['arrival_time'].substring(0, 2))].push([stop_times['arrival_time'].substring(3, 5), 'A']);
	      });
	      var times_html = '<table class="times"><caption>Schedule</caption>';
	      $.each(schedule, function(h, mins) {
		if (h == 0) times_html += '<tr><th rowspan="12">AM&nbsp;&nbsp;</th><th>12:&nbsp;&nbsp;</th><td id="st0">';
		else if (h == 12) times_html += '<tr><th rowspan="12">PM&nbsp;&nbsp;</th><th>12:&nbsp;&nbsp;</th><td id="st12">';
		else times_html += '<tr><th>' + (h % 12) + ':&nbsp;&nbsp;</th><td id="st' + h + '">';
		if (mins.length < 1) times_html += '&nbsp;&ndash;</td></tr>';
		else {
			// times_html += mins.join(', ') + '</td></tr>';
		  $.each(mins, function(i, mins2) {	// Initial
		    if (mins2[1] === 'D') times_html += '<span>' + mins2[0] + '</span>, ';
		    else times_html += '<span class="arrival">' + mins2[0] + '</span>, ';
		  });
		  times_html = times_html.slice(0, -2);
		}
	      });
	      $('#stop').append(times_html + '</table>');
	      // Actual Times
	      if (times['actual_times'].length > -1) {
		$.each(times['actual_times'], function(at, actual_times) {
		  if (actual_times['departure_time'] != null) actual[parseInt(actual_times['departure_time'].substring(0, 2))].push([actual_times['departure_time'], actual_times['deviation'], actual_times['vehicle_id'], actual_times['source'], 'D']);
		  else actual[parseInt(actual_times['arrival_time'].substring(0, 2))].push([actual_times['arrival_time'], actual_times['deviation'], actual_times['vehicle_id'], actual_times['source'], 'A']);
		});
		times_html = '<table id="observed" class="times"><caption>Actual</caption>';
		$.each(actual, function(h, mins) {
		  if (h == 0) times_html += '<tr><th rowspan="12">AM&nbsp;&nbsp;</th><th id="h0" class="h">12:&nbsp;&nbsp;</th><td id="at0">';
                  else if (h == 12) times_html += '<tr><th rowspan="12">PM&nbsp;&nbsp;</th><th id="h12" class="h" >12:&nbsp;&nbsp;</th><td id="at12">';
                  else times_html += '<tr><th id="h' + h + '" class="h">' + (h % 12) + ':&nbsp;&nbsp;</th><td id="at' + h + '">';
                  if (mins.length < 1) times_html += '&nbsp;&ndash;</td></tr>';
                  else {
			$.each(mins, function(i, mins2) {	// Initial
				var class_deviation = '';
				/*
				if (mins2[1] > 600) class_deviation = 'very_late';
				else if (mins2[1] > 300) class_deviation = 'late';
				else if (mins2[1] < -60) class_deviation = 'early';
				*/
				var class_source = '';
				if (mins2[3] !== 'C') class_source = ' interpolated';
				var class_arrival = '';
				if (mins2[4] === 'A') class_arrival = ' arrival';
				times_html += '<span id="bus_' + mins2[2] + '_' + mins2[0] + '" class="' + class_deviation + class_source + class_arrival + '">' + mins2[0].substring(3, 5) + '</span>, ';
			});
			times_html = times_html.slice(0, -2);
			//times_html += mins.join(', ') + '</td></tr>';
		  }
		});
		$('#stop').append(times_html + '</table>');
		function get_run(vehicle_id, date, time) {
		  console.log('Bus ' + vehicle_id);
		}
		$('.h').click(function() {
		  var hour = $(this).attr('id').substring(1);
		  var date_short = $('#date').val();
		  date_short = date_short.substr(6, 4) + date_short.substr(0, 2) + date_short.substr(3, 2);
		  console.log({'date': parseInt(date_short), 'hour': parseInt(hour), 'route_id': route_id, 'direction_id': parseInt(direction_id)});
		  var uuu = '/api/v1/audit.php?route_id=' + encodeURIComponent(route_id) + '&direction_id=' + direction_id + '&date=' + date_short + '&hour=' + hour;
		  $.getJSON(uuu, function(reports) {
		    $.each(reports, function(vehicle_id, rows) {
		      console.groupCollapsed('Bus ' + vehicle_id);
		      console.table(rows, ['timestamp', 'latitude', 'longitude', 'bearing', 'progress', 'trip_id', 'route_id', 'direction_id', 'block_assigned', 'stop_sequence', 'next_stop_id', 'dist_along_route', 'dist_from_stop']);
		      console.groupEnd();
		    });
		  });
		});
	      }
	    });
	    $('#footer').hide();
	    $('#route').hide();
	    $('#breadcrumb').html('<li><a href="/beta">Home</a>&nbsp;</li><li><a href="#" id="mta_bus">MTA Bus</a>&nbsp;</li><li><a href="#" id="bc_route">' + route_display_name + '</a>&nbsp;</li><li class="active">' + stop_id + '</li>');
	    $('a#mta_bus').click(function() {
	      $('#stop').hide();
	      $('#breadcrumb').html('<li><a href="/beta">Home</a>&nbsp;</li><li class="active">MTA Bus</li>');
	      $('#routes').show();
	    });
	    $('a#bc_route').click(function() {
	      $('#stop').hide();
	      $('#route_' + route_short_name).trigger('click');
	    });
	    $('#stop').show();
	    $('#footer').show();
          });
          $('#route').show();
	});
	$('#stop').off().on('click', '#observed span', function() {
	  var vehicle_id = $(this).attr('id').substr(4, 4);
          var date_short = $('#date').val();
          date_short = date_short.substr(6, 4) + date_short.substr(0, 2) + date_short.substr(3, 2);
          var time = $(this).attr('id').substr(9, 8);
          var url = '/api/v1/vehicle.php?vehicle_id=' + vehicle_id + '&date=' + date_short + '&time=' + encodeURIComponent(time);
          $.getJSON(url, function(calls) {
            console.table(calls);
          });
	});
      });
    </script>
  </body>
</html>
